@page "/update-password"
@using MudBlazor
@layout MudBlazorLayout

<div class="wrapper">
    <CustomHeader />
    @if (IsLoading)
    {
        <div class="loading-overlay">
            <div id="preloader"></div>
        </div>
    }
    else
    {
        <div class="container py-4 h-100">
            <div class="row d-flex justify-content-center align-items-center h-100 pt-5">
                <div class="col col-xl-6">
                    <div class="form-container">
                        @if (!string.IsNullOrEmpty(Message))
                        {
                            <div class="alert alert-danger">
                                @Message
                            </div>
                        }
                        <MudPaper Class="pa-4">
                            <EditForm Model="@_loginUserPasswordReset" OnValidSubmit="OnValidSubmit">
                                <DataAnnotationsValidator />
                                <MudGrid>
                                    <MudItem xs="12">
                                        <MudText Typo="Typo.h4">Update Password</MudText>
                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudTextField Label="Current Password" Variant="Variant.Outlined"
                                                      @bind-Value="_loginUserPasswordReset.CurrentPassword"
                                                      For="@(() => _loginUserPasswordReset.CurrentPassword)"
                                                      InputType="@_currentPasswordInput" />
                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudTextField Label="New Password" Variant="Variant.Outlined"
                                                      @bind-Value="_loginUserPasswordReset.NewPassword"
                                                      For="@(() => _loginUserPasswordReset.NewPassword)"
                                                      Adornment="Adornment.End" InputType="@_passwordInput"
                                                      OnAdornmentClick="TogglePasswordVisibility"
                                                      AdornmentIcon="@_passwordInputIcon" />
                                    </MudItem>
                                    <MudItem xs="12">
                                        <MudTextField Label="Confirm New Password" Variant="Variant.Outlined"
                                                      @bind-Value="_loginUserPasswordReset.ConfirmPassword"
                                                      For="@(() => _loginUserPasswordReset.ConfirmPassword)"
                                                      Adornment="Adornment.End" InputType="@_passwordConfirmationInput"
                                                      OnAdornmentClick="TogglePasswordConfirmationVisibility"
                                                      AdornmentIcon="@_passwordConfirmationInputIcon" />
                                    </MudItem>
                                    <MudItem xs="12" Class="d-flex justify-center">
                                        <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Size="Size.Large" Style="width: 100%;">Submit</MudButton>
                                    </MudItem>
                                </MudGrid>
                            </EditForm>
                        </MudPaper>
                    </div>
                </div>
            </div>
        </div>
    }
    <Footer />
</div>
