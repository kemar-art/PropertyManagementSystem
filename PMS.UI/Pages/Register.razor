@page "/register"

<h3>Register</h3>

@if (!string.IsNullOrEmpty(Message))
{
    <div class="alert alert-danger">
        @Message
    </div>
}

<div class="row">
    <div class="col-md-4">
        <EditForm Model="@RegisterVM" OnValidSubmit="HandleRegister">
            <DataAnnotationsValidator />
            @* <ValidationSummary /> *@

            <div class="form-group">
                <label asp-for="FirstName" class="control-label">First Name</label>
                <InputText id="FirstName" class="form-control" @bind-Value="@RegisterVM.FirstName"></InputText>
                <ValidationMessage For="@(() => RegisterVM.FirstName)" />
            </div>
            <div class="form-group">
                <label asp-for="LastName" class="control-label">Last Name</label>
                <InputText id="LastName" class="form-control" @bind-Value="@RegisterVM.LastName"></InputText>
                <ValidationMessage For="@(() => RegisterVM.LastName)" />
            </div>
            <div class="form-group">
                <label asp-for="Email" class="control-label">Email</label>
                <InputText id="Email" class="form-control" @bind-Value="@RegisterVM.Email" @onblur="CheckEmailExistence"></InputText>
                <ValidationMessage For="@(() => RegisterVM.Email)" />
                @if (EmailExists)
                {
                    <div class="text-danger">Email already exists.</div>
                }
            </div>
            <div class="form-group">
                <label asp-for="PhoneNumber" class="control-label">Phone Number</label>
                <InputText id="PhoneNumber" class="form-control" @bind-Value="@RegisterVM.PhoneNumber"></InputText>
                <ValidationMessage For="@(() => RegisterVM.PhoneNumber)" />
            </div>
            <div class="form-group">
                <label asp-for="Gender" class="control-label">Gender</label>
                <InputText id="Gender" class="form-control" @bind-Value="@RegisterVM.Gender"></InputText>
                <ValidationMessage For="@(() => RegisterVM.Gender)" />
            </div>
            <div class="form-group">
                <label asp-for="DateOfBirth" class="control-label">D.O.B</label>
                <InputDate id="DateOfBirth" class="form-control" @bind-Value="@RegisterVM.DateOfBirth"></InputDate>
                <ValidationMessage For="@(() => RegisterVM.DateOfBirth)" />
            </div>
            <div class="form-group">
                <label asp-for="Password" class="control-label">Password</label>
                <InputText id="Password" type="password" class="form-control" @bind-Value="@RegisterVM.Password"></InputText>
                <ValidationMessage For="@(() => RegisterVM.Password)" />
            </div>
            <div class="form-group">
                <label asp-for="ConfirmPassword" class="control-label">Confirm Password</label>
                <InputText id="ConfirmPassword" type="password" class="form-control" @bind-Value="@RegisterVM.ConfirmPassword"></InputText>
                <ValidationMessage For="@(() => RegisterVM.ConfirmPassword)" />
            </div>
            <div class="form-group mt-2">
                <input type="submit" value="Register" class="btn btn-primary" />
            </div>
        </EditForm>
    </div>
</div>
