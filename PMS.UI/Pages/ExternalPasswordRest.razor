@layout MudBlazorLayout
@page "/ex-password-reset"


@using PMS.UI.StaticDetails
@using MudBlazor
@* <h3>Register</h3> *@
<div class="wrapper">
    <CustomHeader />
    @if (!string.IsNullOrEmpty(Message))
    {
        <div class="alert alert-danger">
            @Message
        </div>
    }
    @if (IsLoading)
    {
        <div class="loading-overlay">
            @*  <div class="spinner"></div> *@
            <div id="preloader"></div>
        </div>
    }
    else
    {
        <div class="container py-4 h-100">
            <div class="row d-flex justify-content-center align-items-center h-100 pt-5">
                <div class="col col-xl-4">
                    <div class="form-container">
                        @*  <MudPaper Class="pa-4">
                    </MudPaper> *@
                        <EditForm Model="@_externalPasswordReset" OnValidSubmit="OnValidSubmit">
                            <DataAnnotationsValidator />
                            <MudGrid>
                                <MudItem xs="12" sm="12">
                                    <MudCard>
                                        <MudCardContent>
                                            <MudItem xs="12">
                                                <MudText Typo="Typo.h4">Reset Password</MudText>
                                            </MudItem>
                                            <MudTextField Label="Password" HelperText="Choose a strong password"
                                                          Class="mt-3" @bind-Value="_externalPasswordReset.Password"
                                                          Adornment="Adornment.End" InputType="@_passwordInput"
                                                          OnAdornmentClick="TogglePasswordVisibility"
                                                          AdornmentIcon="@_passwordInputIcon"
                                                          onfocus="ShowConfirmPassword()" />

                                            <MudTextField Label="Repeat Password" HelperText="Repeat the password"
                                                          Class="mt-3 confirm-password"
                                                          @bind-Value="_externalPasswordReset.ConfirmPassword"
                                                          For="@(() => _externalPasswordReset.ConfirmPassword)"
                                                          Adornment="Adornment.End" InputType="@_passwordConfirmationInput"
                                                          OnAdornmentClick="TogglePasswordConfirmationVisibility"
                                                          AdornmentIcon="@_passwordConfirmationInputIcon" />
                                        </MudCardContent>
                                        <MudCardActions>
                                            <MudButton ButtonType="ButtonType.Submit" FullWidth="true" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Reset Password</MudButton>
                                        </MudCardActions>
                                    </MudCard>
                                </MudItem>
                            </MudGrid>
                        </EditForm>
                    </div>
                </div>
            </div>
        </div>
    }

    <Footer />
</div>
